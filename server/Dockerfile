FROM node:22-alpine

WORKDIR /app

COPY . .

ENV PORT=3000

ARG PORT=${PORT}

ARG DATABASE_URL

ARG JWT_SECRET

ENV DATABASE_URL=$DATABASE_URL

ENV JWT_SECRET=$JWT_SECRET

EXPOSE ${PORT}

RUN npm ci --only=production

CMD ["npm", "start"]